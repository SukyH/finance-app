{"ast":null,"code":"var _jsxFileName = \"/Users/sukaina/Downloads/finance-app/src/components/ProtectedRoute.js\",\n  _s = $RefreshSig$();\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport { auth, firestore } from '../firebase'; // Firebase import\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  element,\n  ...rest\n}) => {\n  _s();\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const location = useLocation();\n  useEffect(() => {\n    const checkRole = async () => {\n      const user = auth.currentUser;\n      if (user) {\n        const userDoc = await firestore.collection('users').doc(user.uid).get();\n        setIsAdmin(userDoc.data().role === 'admin'); // Check if user has 'admin' role\n      }\n      setLoading(false);\n    };\n    checkRole();\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 23\n  }, this);\n\n  // If the user is an admin, show the element, otherwise redirect\n  return isAdmin ? element : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/\",\n    state: {\n      from: location\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 30\n  }, this);\n};\n_s(ProtectedRoute, \"shUGHHMfDivvz4m0nlRQT43YTDU=\", false, function () {\n  return [useLocation];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["Navigate","useLocation","useState","useEffect","auth","firestore","jsxDEV","_jsxDEV","ProtectedRoute","element","rest","_s","isAdmin","setIsAdmin","loading","setLoading","location","checkRole","user","currentUser","userDoc","collection","doc","uid","get","data","role","children","fileName","_jsxFileName","lineNumber","columnNumber","to","state","from","_c","$RefreshReg$"],"sources":["/Users/sukaina/Downloads/finance-app/src/components/ProtectedRoute.js"],"sourcesContent":["import { Navigate, useLocation } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport { auth, firestore } from '../firebase';  // Firebase import\n\nconst ProtectedRoute = ({ element, ...rest }) => {\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const location = useLocation();\n\n  useEffect(() => {\n    const checkRole = async () => {\n      const user = auth.currentUser;\n      if (user) {\n        const userDoc = await firestore.collection('users').doc(user.uid).get();\n        setIsAdmin(userDoc.data().role === 'admin'); // Check if user has 'admin' role\n      }\n      setLoading(false);\n    };\n    checkRole();\n  }, []);\n\n  if (loading) return <div>Loading...</div>;\n\n  // If the user is an admin, show the element, otherwise redirect\n  return isAdmin ? element : <Navigate to=\"/\" state={{ from: location }} />;\n};\n\nexport default ProtectedRoute;\n\n\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,IAAI,EAAEC,SAAS,QAAQ,aAAa,CAAC,CAAE;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEhD,MAAMC,cAAc,GAAGA,CAAC;EAAEC,OAAO;EAAE,GAAGC;AAAK,CAAC,KAAK;EAAAC,EAAA;EAC/C,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAMc,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAE9BE,SAAS,CAAC,MAAM;IACd,MAAMc,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,MAAMC,IAAI,GAAGd,IAAI,CAACe,WAAW;MAC7B,IAAID,IAAI,EAAE;QACR,MAAME,OAAO,GAAG,MAAMf,SAAS,CAACgB,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,CAACJ,IAAI,CAACK,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC;QACvEX,UAAU,CAACO,OAAO,CAACK,IAAI,CAAC,CAAC,CAACC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC;MAC/C;MACAX,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC;IACDE,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,IAAIH,OAAO,EAAE,oBAAOP,OAAA;IAAAoB,QAAA,EAAK;EAAU;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;;EAEzC;EACA,OAAOnB,OAAO,GAAGH,OAAO,gBAAGF,OAAA,CAACP,QAAQ;IAACgC,EAAE,EAAC,GAAG;IAACC,KAAK,EAAE;MAAEC,IAAI,EAAElB;IAAS;EAAE;IAAAY,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AAC3E,CAAC;AAACpB,EAAA,CArBIH,cAAc;EAAA,QAGDP,WAAW;AAAA;AAAAkC,EAAA,GAHxB3B,cAAc;AAuBpB,eAAeA,cAAc;AAAC,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}